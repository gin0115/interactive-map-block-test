{"version":3,"sources":["@wordpress/components/src/popover/index.js"],"names":["classnames","useRef","useState","useLayoutEffect","forwardRef","createContext","useContext","getRectangleFromRange","useViewportMatch","useResizeObserver","useMergeRefs","__experimentalUseDialog","useDialog","close","computePopoverPosition","offsetIframe","Button","ScrollLock","Slot","Fill","useSlot","getAnimateClassName","SLOT_NAME","slotNameContext","computeAnchorRect","anchorRefFallback","anchorRect","getAnchorRect","anchorRef","container","current","rect","ownerDocument","window","Range","Element","DOMRect","cloneRange","endContainer","getBoundingClientRect","top","bottom","topRect","bottomRect","left","width","parentNode","setAttribute","element","name","value","hasAttribute","removeAttribute","getAttribute","setStyle","property","style","setClass","toggle","classList","contains","add","remove","getAnchorDocument","anchor","Popover","ref","headerTitle","onClose","children","className","noArrow","isAlternate","position","range","focusOnMount","expandOnMobile","animate","onFocusOutside","__unstableStickyBoundaryElement","__unstableSlotName","__unstableObserveElement","__unstableBoundaryParent","__unstableForcePosition","__unstableForceXAlignment","__unstableEditorCanvasWrapper","contentProps","contentRef","containerRef","isMobileViewport","animateOrigin","setAnimateOrigin","slotName","slot","isExpanded","containerResizeListener","contentSize","refresh","offsetParent","relativeOffsetTop","body","offsetParentRect","height","boundaryElement","parentElement","usedContentSize","popoverTop","popoverLeft","xAxis","yAxis","contentHeight","contentWidth","yAxisMapping","xAxisMapping","right","animateYAxis","animateXAxis","defaultView","intervalHandle","setInterval","rafId","refreshOnAnimationFrame","cancelAnimationFrame","requestAnimationFrame","addEventListener","anchorDocument","observer","MutationObserver","observe","attributes","clearInterval","removeEventListener","disconnect","onDialogClose","type","event","dialogRef","dialogProps","__unstableOnClose","mergedRefs","animateClassName","Boolean","origin","content","PopoverContainer","PopoverSlot","__unstableSlotNameProvider","Provider"],"mappings":"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","sourcesContent":["// @ts-nocheck\n/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tuseRef,\n\tuseState,\n\tuseLayoutEffect,\n\tforwardRef,\n\tcreateContext,\n\tuseContext,\n} from '@wordpress/element';\nimport { getRectangleFromRange } from '@wordpress/dom';\nimport {\n\tuseViewportMatch,\n\tuseResizeObserver,\n\tuseMergeRefs,\n\t__experimentalUseDialog as useDialog,\n} from '@wordpress/compose';\nimport { close } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport { computePopoverPosition, offsetIframe } from './utils';\nimport Button from '../button';\nimport ScrollLock from '../scroll-lock';\nimport { Slot, Fill, useSlot } from '../slot-fill';\nimport { getAnimateClassName } from '../animate';\n\n/**\n * Name of slot in which popover should fill.\n *\n * @type {string}\n */\nconst SLOT_NAME = 'Popover';\n\nconst slotNameContext = createContext();\n\nfunction computeAnchorRect(\n\tanchorRefFallback,\n\tanchorRect,\n\tgetAnchorRect,\n\tanchorRef = false,\n\tcontainer\n) {\n\tif ( anchorRect ) {\n\t\treturn anchorRect;\n\t}\n\n\tif ( getAnchorRect ) {\n\t\tif ( ! anchorRefFallback.current ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst rect = getAnchorRect( anchorRefFallback.current );\n\t\treturn offsetIframe(\n\t\t\trect,\n\t\t\trect.ownerDocument || anchorRefFallback.current.ownerDocument,\n\t\t\tcontainer\n\t\t);\n\t}\n\n\tif ( anchorRef !== false ) {\n\t\tif (\n\t\t\t! anchorRef ||\n\t\t\t! window.Range ||\n\t\t\t! window.Element ||\n\t\t\t! window.DOMRect\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Duck-type to check if `anchorRef` is an instance of Range\n\t\t// `anchorRef instanceof window.Range` checks will break across document boundaries\n\t\t// such as in an iframe.\n\t\tif ( typeof anchorRef?.cloneRange === 'function' ) {\n\t\t\treturn offsetIframe(\n\t\t\t\tgetRectangleFromRange( anchorRef ),\n\t\t\t\tanchorRef.endContainer.ownerDocument,\n\t\t\t\tcontainer\n\t\t\t);\n\t\t}\n\n\t\t// Duck-type to check if `anchorRef` is an instance of Element\n\t\t// `anchorRef instanceof window.Element` checks will break across document boundaries\n\t\t// such as in an iframe.\n\t\tif ( typeof anchorRef?.getBoundingClientRect === 'function' ) {\n\t\t\tconst rect = offsetIframe(\n\t\t\t\tanchorRef.getBoundingClientRect(),\n\t\t\t\tanchorRef.ownerDocument,\n\t\t\t\tcontainer\n\t\t\t);\n\n\t\t\treturn rect;\n\t\t}\n\n\t\tconst { top, bottom } = anchorRef;\n\t\tconst topRect = top.getBoundingClientRect();\n\t\tconst bottomRect = bottom.getBoundingClientRect();\n\n\t\treturn offsetIframe(\n\t\t\tnew window.DOMRect(\n\t\t\t\ttopRect.left,\n\t\t\t\ttopRect.top,\n\t\t\t\ttopRect.width,\n\t\t\t\tbottomRect.bottom - topRect.top\n\t\t\t),\n\t\t\ttop.ownerDocument,\n\t\t\tcontainer\n\t\t);\n\t}\n\n\tif ( ! anchorRefFallback.current ) {\n\t\treturn;\n\t}\n\n\tconst { parentNode } = anchorRefFallback.current;\n\n\treturn offsetIframe(\n\t\tparentNode.getBoundingClientRect(),\n\t\tparentNode.ownerDocument,\n\t\tcontainer\n\t);\n}\n\n/**\n * Sets or removes an element attribute.\n *\n * @param {Element} element The element to modify.\n * @param {string}  name    The attribute name to set or remove.\n * @param {?string} value   The value to set. A falsy value will remove the\n *                          attribute.\n */\nfunction setAttribute( element, name, value ) {\n\tif ( ! value ) {\n\t\tif ( element.hasAttribute( name ) ) {\n\t\t\telement.removeAttribute( name );\n\t\t}\n\t} else if ( element.getAttribute( name ) !== value ) {\n\t\telement.setAttribute( name, value );\n\t}\n}\n\n/**\n * Sets or removes an element style property.\n *\n * @param {Element} element  The element to modify.\n * @param {string}  property The property to set or remove.\n * @param {?string} value    The value to set. A falsy value will remove the\n *                           property.\n */\nfunction setStyle( element, property, value = '' ) {\n\tif ( element.style[ property ] !== value ) {\n\t\telement.style[ property ] = value;\n\t}\n}\n\n/**\n * Sets or removes an element class.\n *\n * @param {Element} element The element to modify.\n * @param {string}  name    The class to set or remove.\n * @param {boolean} toggle  True to set the class, false to remove.\n */\nfunction setClass( element, name, toggle ) {\n\tif ( toggle ) {\n\t\tif ( ! element.classList.contains( name ) ) {\n\t\t\telement.classList.add( name );\n\t\t}\n\t} else if ( element.classList.contains( name ) ) {\n\t\telement.classList.remove( name );\n\t}\n}\n\nfunction getAnchorDocument( anchor ) {\n\tif ( ! anchor ) {\n\t\treturn;\n\t}\n\n\tif ( anchor.endContainer ) {\n\t\treturn anchor.endContainer.ownerDocument;\n\t}\n\n\tif ( anchor.top ) {\n\t\treturn anchor.top.ownerDocument;\n\t}\n\n\treturn anchor.ownerDocument;\n}\n\nconst Popover = (\n\t{\n\t\theaderTitle,\n\t\tonClose,\n\t\tchildren,\n\t\tclassName,\n\t\tnoArrow = true,\n\t\tisAlternate,\n\t\t// Disable reason: We generate the `...contentProps` rest as remainder\n\t\t// of props which aren't explicitly handled by this component.\n\t\t/* eslint-disable no-unused-vars */\n\t\tposition = 'bottom right',\n\t\trange,\n\t\tfocusOnMount = 'firstElement',\n\t\tanchorRef,\n\t\tanchorRect,\n\t\tgetAnchorRect,\n\t\texpandOnMobile,\n\t\tanimate = true,\n\t\tonFocusOutside,\n\t\t__unstableStickyBoundaryElement,\n\t\t__unstableSlotName = SLOT_NAME,\n\t\t__unstableObserveElement,\n\t\t__unstableBoundaryParent,\n\t\t__unstableForcePosition,\n\t\t__unstableForceXAlignment,\n\t\t__unstableEditorCanvasWrapper,\n\t\t/* eslint-enable no-unused-vars */\n\t\t...contentProps\n\t},\n\tref\n) => {\n\tconst anchorRefFallback = useRef( null );\n\tconst contentRef = useRef( null );\n\tconst containerRef = useRef();\n\tconst isMobileViewport = useViewportMatch( 'medium', '<' );\n\tconst [ animateOrigin, setAnimateOrigin ] = useState();\n\tconst slotName = useContext( slotNameContext ) || __unstableSlotName;\n\tconst slot = useSlot( slotName );\n\tconst isExpanded = expandOnMobile && isMobileViewport;\n\tconst [ containerResizeListener, contentSize ] = useResizeObserver();\n\tnoArrow = isExpanded || noArrow;\n\n\tuseLayoutEffect( () => {\n\t\tif ( isExpanded ) {\n\t\t\tsetClass( containerRef.current, 'is-without-arrow', noArrow );\n\t\t\tsetClass( containerRef.current, 'is-alternate', isAlternate );\n\t\t\tsetAttribute( containerRef.current, 'data-x-axis' );\n\t\t\tsetAttribute( containerRef.current, 'data-y-axis' );\n\t\t\tsetStyle( containerRef.current, 'top' );\n\t\t\tsetStyle( containerRef.current, 'left' );\n\t\t\tsetStyle( contentRef.current, 'maxHeight' );\n\t\t\tsetStyle( contentRef.current, 'maxWidth' );\n\t\t\treturn;\n\t\t}\n\n\t\tconst refresh = () => {\n\t\t\tif ( ! containerRef.current || ! contentRef.current ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet anchor = computeAnchorRect(\n\t\t\t\tanchorRefFallback,\n\t\t\t\tanchorRect,\n\t\t\t\tgetAnchorRect,\n\t\t\t\tanchorRef,\n\t\t\t\tcontainerRef.current\n\t\t\t);\n\n\t\t\tif ( ! anchor ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { offsetParent, ownerDocument } = containerRef.current;\n\n\t\t\tlet relativeOffsetTop = 0;\n\n\t\t\t// If there is a positioned ancestor element that is not the body,\n\t\t\t// subtract the position from the anchor rect. If the position of\n\t\t\t// the popover is fixed, the offset parent is null or the body\n\t\t\t// element, in which case the position is relative to the viewport.\n\t\t\t// See https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetParent\n\t\t\tif ( offsetParent && offsetParent !== ownerDocument.body ) {\n\t\t\t\tconst offsetParentRect = offsetParent.getBoundingClientRect();\n\n\t\t\t\trelativeOffsetTop = offsetParentRect.top;\n\t\t\t\tanchor = new window.DOMRect(\n\t\t\t\t\tanchor.left - offsetParentRect.left,\n\t\t\t\t\tanchor.top - offsetParentRect.top,\n\t\t\t\t\tanchor.width,\n\t\t\t\t\tanchor.height\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tlet boundaryElement;\n\t\t\tif ( __unstableBoundaryParent ) {\n\t\t\t\tboundaryElement = containerRef.current.parentElement;\n\t\t\t}\n\n\t\t\tconst usedContentSize = ! contentSize.height\n\t\t\t\t? contentRef.current.getBoundingClientRect()\n\t\t\t\t: contentSize;\n\n\t\t\tconst {\n\t\t\t\tpopoverTop,\n\t\t\t\tpopoverLeft,\n\t\t\t\txAxis,\n\t\t\t\tyAxis,\n\t\t\t\tcontentHeight,\n\t\t\t\tcontentWidth,\n\t\t\t} = computePopoverPosition(\n\t\t\t\tanchor,\n\t\t\t\tusedContentSize,\n\t\t\t\tposition,\n\t\t\t\t__unstableStickyBoundaryElement,\n\t\t\t\tcontainerRef.current,\n\t\t\t\trelativeOffsetTop,\n\t\t\t\tboundaryElement,\n\t\t\t\t__unstableForcePosition,\n\t\t\t\t__unstableForceXAlignment,\n\t\t\t\t__unstableEditorCanvasWrapper\n\t\t\t);\n\n\t\t\tif (\n\t\t\t\ttypeof popoverTop === 'number' &&\n\t\t\t\ttypeof popoverLeft === 'number'\n\t\t\t) {\n\t\t\t\tsetStyle( containerRef.current, 'top', popoverTop + 'px' );\n\t\t\t\tsetStyle( containerRef.current, 'left', popoverLeft + 'px' );\n\t\t\t}\n\n\t\t\tsetClass(\n\t\t\t\tcontainerRef.current,\n\t\t\t\t'is-without-arrow',\n\t\t\t\tnoArrow || ( xAxis === 'center' && yAxis === 'middle' )\n\t\t\t);\n\t\t\tsetClass( containerRef.current, 'is-alternate', isAlternate );\n\t\t\tsetAttribute( containerRef.current, 'data-x-axis', xAxis );\n\t\t\tsetAttribute( containerRef.current, 'data-y-axis', yAxis );\n\t\t\tsetStyle(\n\t\t\t\tcontentRef.current,\n\t\t\t\t'maxHeight',\n\t\t\t\ttypeof contentHeight === 'number' ? contentHeight + 'px' : ''\n\t\t\t);\n\t\t\tsetStyle(\n\t\t\t\tcontentRef.current,\n\t\t\t\t'maxWidth',\n\t\t\t\ttypeof contentWidth === 'number' ? contentWidth + 'px' : ''\n\t\t\t);\n\n\t\t\t// Compute the animation position.\n\t\t\tconst yAxisMapping = {\n\t\t\t\ttop: 'bottom',\n\t\t\t\tbottom: 'top',\n\t\t\t};\n\t\t\tconst xAxisMapping = {\n\t\t\t\tleft: 'right',\n\t\t\t\tright: 'left',\n\t\t\t};\n\t\t\tconst animateYAxis = yAxisMapping[ yAxis ] || 'middle';\n\t\t\tconst animateXAxis = xAxisMapping[ xAxis ] || 'center';\n\n\t\t\tsetAnimateOrigin( animateXAxis + ' ' + animateYAxis );\n\t\t};\n\n\t\trefresh();\n\n\t\tconst { ownerDocument } = containerRef.current;\n\t\tconst { defaultView } = ownerDocument;\n\n\t\t/*\n\t\t * There are sometimes we need to reposition or resize the popover that\n\t\t * are not handled by the resize/scroll window events (i.e. CSS changes\n\t\t * in the layout that changes the position of the anchor).\n\t\t *\n\t\t * For these situations, we refresh the popover every 0.5s\n\t\t */\n\t\tconst intervalHandle = defaultView.setInterval( refresh, 500 );\n\n\t\tlet rafId;\n\n\t\tconst refreshOnAnimationFrame = () => {\n\t\t\tdefaultView.cancelAnimationFrame( rafId );\n\t\t\trafId = defaultView.requestAnimationFrame( refresh );\n\t\t};\n\n\t\t// Sometimes a click trigger a layout change that affects the popover\n\t\t// position. This is an opportunity to immediately refresh rather than\n\t\t// at the interval.\n\t\tdefaultView.addEventListener( 'click', refreshOnAnimationFrame );\n\t\tdefaultView.addEventListener( 'resize', refresh );\n\t\tdefaultView.addEventListener( 'scroll', refresh, true );\n\n\t\tconst anchorDocument = getAnchorDocument( anchorRef );\n\n\t\t// If the anchor is within an iframe, the popover position also needs\n\t\t// to refrest when the iframe content is scrolled or resized.\n\t\tif ( anchorDocument && anchorDocument !== ownerDocument ) {\n\t\t\tanchorDocument.defaultView.addEventListener( 'resize', refresh );\n\t\t\tanchorDocument.defaultView.addEventListener(\n\t\t\t\t'scroll',\n\t\t\t\trefresh,\n\t\t\t\ttrue\n\t\t\t);\n\t\t}\n\n\t\tlet observer;\n\n\t\tif ( __unstableObserveElement ) {\n\t\t\tobserver = new defaultView.MutationObserver( refresh );\n\t\t\tobserver.observe( __unstableObserveElement, { attributes: true } );\n\t\t}\n\n\t\treturn () => {\n\t\t\tdefaultView.clearInterval( intervalHandle );\n\t\t\tdefaultView.removeEventListener( 'resize', refresh );\n\t\t\tdefaultView.removeEventListener( 'scroll', refresh, true );\n\t\t\tdefaultView.removeEventListener( 'click', refreshOnAnimationFrame );\n\t\t\tdefaultView.cancelAnimationFrame( rafId );\n\n\t\t\tif ( anchorDocument && anchorDocument !== ownerDocument ) {\n\t\t\t\tanchorDocument.defaultView?.removeEventListener(\n\t\t\t\t\t'resize',\n\t\t\t\t\trefresh\n\t\t\t\t);\n\t\t\t\tanchorDocument.defaultView?.removeEventListener(\n\t\t\t\t\t'scroll',\n\t\t\t\t\trefresh,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif ( observer ) {\n\t\t\t\tobserver.disconnect();\n\t\t\t}\n\t\t};\n\t}, [\n\t\tisExpanded,\n\t\tanchorRect,\n\t\tgetAnchorRect,\n\t\tanchorRef,\n\t\tposition,\n\t\tcontentSize,\n\t\t__unstableStickyBoundaryElement,\n\t\t__unstableObserveElement,\n\t\t__unstableBoundaryParent,\n\t] );\n\n\tconst onDialogClose = ( type, event ) => {\n\t\t// Ideally the popover should have just a single onClose prop and\n\t\t// not three props that potentially do the same thing.\n\t\tif ( type === 'focus-outside' && onFocusOutside ) {\n\t\t\tonFocusOutside( event );\n\t\t} else if ( onClose ) {\n\t\t\tonClose();\n\t\t}\n\t};\n\n\tconst [ dialogRef, dialogProps ] = useDialog( {\n\t\tfocusOnMount,\n\t\t__unstableOnClose: onDialogClose,\n\t\tonClose: onDialogClose,\n\t} );\n\n\tconst mergedRefs = useMergeRefs( [ containerRef, dialogRef, ref ] );\n\n\t/** @type {false | string} */\n\tconst animateClassName =\n\t\tBoolean( animate && animateOrigin ) &&\n\t\tgetAnimateClassName( {\n\t\t\ttype: 'appear',\n\t\t\torigin: animateOrigin,\n\t\t} );\n\n\t// Disable reason: We care to capture the _bubbled_ events from inputs\n\t// within popover as inferring close intent.\n\n\tlet content = (\n\t\t// eslint-disable-next-line jsx-a11y/no-noninteractive-element-interactions\n\t\t// eslint-disable-next-line jsx-a11y/no-static-element-interactions\n\t\t<div\n\t\t\tclassName={ classnames(\n\t\t\t\t'components-popover',\n\t\t\t\tclassName,\n\t\t\t\tanimateClassName,\n\t\t\t\t{\n\t\t\t\t\t'is-expanded': isExpanded,\n\t\t\t\t\t'is-without-arrow': noArrow,\n\t\t\t\t\t'is-alternate': isAlternate,\n\t\t\t\t}\n\t\t\t) }\n\t\t\t{ ...contentProps }\n\t\t\tref={ mergedRefs }\n\t\t\t{ ...dialogProps }\n\t\t\ttabIndex=\"-1\"\n\t\t>\n\t\t\t{ isExpanded && <ScrollLock /> }\n\t\t\t{ isExpanded && (\n\t\t\t\t<div className=\"components-popover__header\">\n\t\t\t\t\t<span className=\"components-popover__header-title\">\n\t\t\t\t\t\t{ headerTitle }\n\t\t\t\t\t</span>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclassName=\"components-popover__close\"\n\t\t\t\t\t\ticon={ close }\n\t\t\t\t\t\tonClick={ onClose }\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t) }\n\t\t\t<div ref={ contentRef } className=\"components-popover__content\">\n\t\t\t\t<div style={ { position: 'relative' } }>\n\t\t\t\t\t{ containerResizeListener }\n\t\t\t\t\t{ children }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n\n\tif ( slot.ref ) {\n\t\tcontent = <Fill name={ slotName }>{ content }</Fill>;\n\t}\n\n\tif ( anchorRef || anchorRect ) {\n\t\treturn content;\n\t}\n\n\treturn <span ref={ anchorRefFallback }>{ content }</span>;\n};\n\nconst PopoverContainer = forwardRef( Popover );\n\nfunction PopoverSlot( { name = SLOT_NAME }, ref ) {\n\treturn (\n\t\t<Slot\n\t\t\tbubblesVirtually\n\t\t\tname={ name }\n\t\t\tclassName=\"popover-slot\"\n\t\t\tref={ ref }\n\t\t/>\n\t);\n}\n\nPopoverContainer.Slot = forwardRef( PopoverSlot );\nPopoverContainer.__unstableSlotNameProvider = slotNameContext.Provider;\n\nexport default PopoverContainer;\n"]}